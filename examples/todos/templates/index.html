<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>Todos</title>
    <meta name="livetemplate-token" content="{{.Token}}">
    
    <!-- Pico CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    
    <!-- LiveTemplate bundled client (includes morphdom) -->
    <script src="/dist/livetemplate-client.min.js"></script>
    
    <!-- LiveTemplate auto-initializes when this script loads -->
</head>
<body>
    <main class="container">
        <h1>Todo List</h1>

        <div class="grid">
            <input
                type="text"
                id="todo-input"
                name="todo-input"
                placeholder="What needs to be done?"
                value="{{.InputText}}"
            />
            <button 
                data-lvt-action="addtodo"
                data-lvt-element="todo-input"
            >Add Todo</button>
        </div>

        <div style="display: {{if .ShowError}}block{{else}}none{{end}}">
            <mark>{{.ErrorText}}</mark>
        </div>

        <div class="todo-container">
            {{range .Todos}}
            <article>
                <label>
                    <input
                        type="checkbox"
                        {{if .Completed}}checked{{end}}
                        data-lvt-action="toggletodo"
                        data-lvt-params='{"todo-id": "{{.ID}}"}'
                    />
                    <span {{if .Completed}}style="text-decoration: line-through; color: var(--pico-muted-color);"{{end}}>
                        {{.Text}}
                    </span>
                </label>
                <button
                    class="secondary"
                    data-lvt-action="removetodo"
                    data-lvt-params='{"todo-id": "{{.ID}}"}'
                >
                    Remove
                </button>
            </article>
            {{end}}
        </div>

        <small>
            Total: {{.TodoCount}} {{if eq .TodoCount 1}}todo{{else}}todos{{end}}
        </small>
    </main>
</body>
</html>
