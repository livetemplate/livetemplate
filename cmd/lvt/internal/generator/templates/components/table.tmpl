{{/* Table wrapper component */}}
{{define "tableBox"}}
[[- if needsArticle .CSSFramework]]
<article>
[[- else if ne (boxClass .CSSFramework) ""]]
<div class="[[boxClass .CSSFramework]]">
[[- else]]
<div>
[[- end]]
  {{block "tableContent" .}}{{end}}
[[- if needsArticle .CSSFramework]]
</article>
[[- else]]
</div>
[[- end]]
{{end}}

{{/* Resource table with data */}}
{{define "resourceTable"}}
  <h2[[if ne (subtitleClass .CSSFramework) ""]] class="[[subtitleClass .CSSFramework]]"[[end]]>[[.ResourceName]]s</h2>
  {{if gt (len .Paginated[[.ResourceName]]s) 0}}
[[- if needsTableWrapper .CSSFramework]]
    <div class="[[tableWrapperClass .CSSFramework]]">
[[- end]]
      <table[[if ne (tableClass .CSSFramework) ""]] class="[[tableClass .CSSFramework]]"[[end]]>
        <thead>
          <tr>
[[- $displayField := displayField .Fields]]
            <th>[[- $displayField.Name | title]]</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{range .Paginated[[.ResourceName]]s}}
            <tr data-key="{{.ID}}">
              <td>
[[- if eq $displayField.GoType "bool"]]
                {{if .[[$displayField.Name | title]]}}✓{{else}}✗{{end}}
[[- else if eq $displayField.GoType "time.Time"]]
                {{.[[$displayField.Name | title]].Format "2006-01-02 15:04"}}
[[- else]]
                {{.[[$displayField.Name | title]]}}
[[- end]]
              </td>
              <td>
                <button[[if ne (buttonClass $.CSSFramework "primary") ""]] class="[[buttonClass $.CSSFramework "primary"]]"[[end]] lvt-click="edit" lvt-data-id="{{.ID}}">
                  Edit
                </button>
                <button[[if ne (buttonClass $.CSSFramework "danger") ""]] class="[[buttonClass $.CSSFramework "danger"]]"[[end]] lvt-click="delete" lvt-data-id="{{.ID}}">
                  Delete
                </button>
              </td>
            </tr>
          {{end}}
        </tbody>
      </table>
[[- if needsTableWrapper .CSSFramework]]
    </div>
[[- end]]
  {{else}}
    <p>
      {{if ne .SearchQuery ""}}
        No [[.ResourceNameLower]]s found matching "{{.SearchQuery}}"
      {{else}}
        No [[.ResourceNameLower]]s yet. Add one above!
      {{end}}
    </p>
  {{end}}
{{end}}
